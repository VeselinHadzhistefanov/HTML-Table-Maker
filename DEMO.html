<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="prompt_space_styles.css" />
    <style>
        .prompt-space-container{
    display: flex;
    justify-content: center;
}

.prompt-space {
    width: 400px;
    height: 500px;
    display: flex;
    flex-direction: column;
}

.message-area {
    flex: 1;
    overflow-y: auto;
    display: flex;
    flex-direction: column;
    gap: 8px;
    padding-bottom: 8px;
}

.flex-spacer{
    height: 100%;
}

.message-row {
    display: flex;
}

.message-row.machine {
    justify-content: flex-start;
}

.message-row.user {
    justify-content: flex-end;
}

.bubble-container {
    position: relative;
    display: inline-block;
}

.bubble-text {
    position: absolute;
    font-size: 16px;
    line-height: 24px;
    height: 24px;
    overflow: hidden;
    white-space: nowrap;
}

.bubble-text-content {
    display: inline-block;
    white-space: nowrap;
}

.bubble-ellipsis {
    position: absolute;
    right: 0;
    top: 0;
    font-size: 16px;
    line-height: 24px;
    background: white;
    padding-left: 2px;
}

.input-row {
    padding: 0;
    height : 24px;
}

.input-textbox {
    position: absolute;
    font-size: 16px;
    border: none;
    background: none;
    outline: none;
    padding: 0;
    margin: 0;
    box-sizing: border-box;
}
    </style>
    <title>Prompt Space</title>
</head>
<body>
    <div class="prompt-space-container">
        <div class="prompt-space" id="prompt-space">
            <svg class="prompt-space-frame" id="prompt-space-frame" overflow="visible">
                <line id="border-top" stroke="black" x1="0" y1="0" x2="400" y2="0"/>
                <line id="border-left" stroke="black" x1="0" y1="0" x2="0" y2="476"/>
                <line id="border-right" stroke="black" x1="400" y1="0" x2="400" y2="500"/>
            </svg>
            <div class="message-area" id="message-area">
                <div class="flex-spacer"></div>
            </div>
            <div class="input-row" id="input-row"></div>
        </div>
    </div>
    <script>
        (function () {
    var BOX_HEIGHT = 24;
    var bubbleWidth = 200;
    var borderWeight = 1;
    var currentVariant = 1;

    function setBubbleWidth(width) {
        bubbleWidth = width;
        render();
    }

    function setBorderWeight(weight) {
        borderWeight = weight;
        render();
    }

    function setVariant(variant) {
        currentVariant = variant;
        render();
    }

    function render() {
        var H = BOX_HEIGHT;
        var W = bubbleWidth;
        var totalWidth = W + 2 * H;

        var svg = document.getElementById("bubble-frame");
        svg.setAttribute("width", totalWidth);
        svg.setAttribute("height", H);

        var lines = svg.querySelectorAll("line");
        for (var i = 0; i < lines.length; i++) {
            lines[i].setAttribute("stroke-width", borderWeight);
        }

        setLine("border-top", H, 0, H + W, 0);
        setLine("border-bottom", H, H, H + W, H);
        setLine("border-ext-tl", 0, 0, H, 0);
        setLine("border-ext-tr", H + W, 0, 2 * H + W, 0);
        setLine("border-ext-bl", 0, H, H, H);
        setLine("border-ext-br", H + W, H, 2 * H + W, H);
        setLine("diagonal-1", 0, 0, H, H);
        setLine("diagonal-2", H, 0, 0, H);
        setLine("diagonal-3", H + W, 0, 2 * H + W, H);
        setLine("diagonal-4", H + W, H, 2 * H + W, 0);

        if (currentVariant === 1) {
            setVisible("border-ext-tl", true);
            setVisible("border-ext-tr", false);
            setVisible("border-ext-bl", false);
            setVisible("border-ext-br", true);
            setVisible("diagonal-1", true);
            setVisible("diagonal-2", false);
            setVisible("diagonal-3", true);
            setVisible("diagonal-4", false);
        } else {
            setVisible("border-ext-tl", false);
            setVisible("border-ext-tr", true);
            setVisible("border-ext-bl", true);
            setVisible("border-ext-br", false);
            setVisible("diagonal-1", false);
            setVisible("diagonal-2", true);
            setVisible("diagonal-3", false);
            setVisible("diagonal-4", true);
        }

        var textbox = document.getElementById("bubble-textbox");
        textbox.style.left = H + "px";
        textbox.style.top = "0px";
        textbox.style.width = W + "px";
        textbox.style.height = H + "px";
    }

    function setLine(id, x1, y1, x2, y2) {
        var el = document.getElementById(id);
        el.setAttribute("x1", x1);
        el.setAttribute("y1", y1);
        el.setAttribute("x2", x2);
        el.setAttribute("y2", y2);
    }

    function setVisible(id, visible) {
        var el = document.getElementById(id);
        el.style.display = visible ? "" : "none";
    }

    window.setBubbleWidth = setBubbleWidth;
    window.setBorderWeight = setBorderWeight;
    window.setVariant = setVariant;

    document.addEventListener("DOMContentLoaded", render);
})();

    </script>
</body>
</html>
